{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/error.svg","../src/img/caution.svg","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport function getPicturesByQuery({\n  query = '',\n  page = 1,\n  per_page = 15,\n} = {}) {\n  const FullURL = `https://pixabay.com/api/?key=44778240-802eb20b46cf6f3dc26aab8d1&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  return axios\n    .get(FullURL, { params: { query, page, per_page } })\n    .then(({ data }) => data);\n}\n","export function renderGalleryCard(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n      <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n      <ul class=\"card-info\">\n        <li class=\"card-info-item\">\n          Likes<span class=\"accent\">${likes}</span>\n        </li>\n        <li class=\"card-info-item\">\n          Views<span class=\"accent\">${views}</span>\n        </li>\n        <li class=\"card-info-item\">\n          Comments<span class=\"accent\">${comments}</span>\n        </li>\n        <li class=\"card-info-item\">\n          Downloads<span class=\"accent\">${downloads}</span>\n        </li>\n      </ul>\n      </a>\n    </li>`\n    )\n    .join('');\n}\n","export default \"__VITE_ASSET__8479b7dd__\"","export default \"__VITE_ASSET__02852ca5__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getPicturesByQuery } from './js/pixabay-api';\nimport { renderGalleryCard } from './js/render-functions';\nimport errorSvg from './img/error.svg';\nimport cautionSvg from './img/caution.svg';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst preloader = document.querySelector('.loader-wrap');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n// const secondPreloader = document.querySelector('.second-loader-wrap');\n\n//Підключення бібліотеки для відображення галереї, що гортається\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt', //Підпис під зображенням\n  captionDelay: 250, //Час, після якого буде відображений підпис\n});\nconst params = {\n  query: '',\n  page: 1,\n  per_page: 15,\n  max_page: 0,\n};\n\nform.addEventListener('submit', handlerSubmit); //Прослуховувач подій\n\nasync function handlerSubmit(event) {\n  event.preventDefault(); //Запобігаємо дефолтному перезавантаженню сторінки\n  gallery.innerHTML = ''; //очищаємо вміст галереї перед новим пошуком\n  params.page = 1;\n  params.query = form.elements.input.value.trim(); //Обробка запиту користувача\n\n  if (!params.query) {\n    //Якщо користувач залишив поле пустим\n    iziToast.warning({\n      title: 'Caution',\n      titleColor: 'white',\n      titleSize: '16px',\n      message: 'Please, fill out the field!',\n      messageColor: 'white',\n      messageSize: '16px',\n      position: 'topRight',\n      backgroundColor: '#ffa000',\n      iconUrl: cautionSvg,\n      close: false,\n      closeOnClick: true,\n    });\n    form.reset();\n    return;\n  }\n\n  preloader.style.display = 'flex'; //Додавання прелоадера\n  try {\n    const picture = await getPicturesByQuery(params); //HTTP запит, результатом якого буде об'єкт, записаний в picture\n\n    // Якщо об'єкт бекенду data.hits пустий (користувач ввів щось невалідне) -> сповіщуємо про це\n    if (picture.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        titleColor: 'white',\n        titleSize: '16px',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: 'white',\n        messageSize: '16px',\n        position: 'bottomRight',\n        backgroundColor: '#ef4040',\n        iconUrl: errorSvg,\n        close: false,\n        closeOnClick: true,\n      });\n    } else {\n      params.max_page = Math.ceil(picture.totalHits / params.per_page);\n      if (params.max_page > 1) {\n        loadMoreBtn.style.display = 'block';\n        loadMoreBtn.addEventListener('click', handlerLoadMore);\n      } else {\n        loadMoreBtn.style.display = 'none';\n      }\n      gallery.innerHTML = renderGalleryCard(picture.hits); //Виклик функції для створення розмітки\n      lightbox.refresh(); //Метод бібліотеки SimpleLightbox, який видаляє і повторно ініціалізує лайтбокс\n    }\n    //Інформуємо користувача у разі виникнення помилки\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      titleColor: 'white',\n      titleSize: '16px',\n      message: `Ups... Someting went wrong. Error: ${error}`,\n      messageColor: 'white',\n      messageSize: '16px',\n      position: 'bottomRight',\n      backgroundColor: '#ef4040',\n      iconUrl: errorSvg,\n      close: false,\n      closeOnClick: true,\n    });\n  } finally {\n    form.reset(); //Оновлення поля форми\n    preloader.style.display = 'none'; //Видалення прелоадера після завантаження картинок\n  }\n}\n\nasync function handlerLoadMore() {\n  params.page += 1;\n  preloader.style.display = 'flex';\n  loadMoreBtn.style.display = 'none';\n  try {\n    const picture = await getPicturesByQuery(params);\n    gallery.insertAdjacentHTML('beforeend', renderGalleryCard(picture.hits));\n    lightbox.refresh();\n\n    //!тут буде плавний скролл\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      titleColor: 'white',\n      titleSize: '16px',\n      message: `Ups... Someting went wrong. Error: ${error}`,\n      messageColor: 'white',\n      messageSize: '16px',\n      position: 'bottomRight',\n      backgroundColor: '#ef4040',\n      iconUrl: errorSvg,\n      close: false,\n      closeOnClick: true,\n    });\n  } finally {\n    preloader.style.display = 'none';\n    if (params.page === params.max_page) {\n      loadMoreBtn.style.display = 'none';\n      loadMoreBtn.removeEventListener('click', handlerLoadMore);\n      iziToast.warning({\n        title: 'Caution',\n        titleColor: 'white',\n        titleSize: '16px',\n        message:\n          'We are sorry, but you have reached the end of search results.',\n        messageColor: 'white',\n        messageSize: '16px',\n        position: 'topRight',\n        backgroundColor: '#ffa000',\n        iconUrl: cautionSvg,\n        close: false,\n        closeOnClick: true,\n      });\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n  }\n}\n"],"names":["getPicturesByQuery","query","page","per_page","FullURL","axios","data","renderGalleryCard","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","errorSvg","cautionSvg","form","gallery","preloader","loadMoreBtn","lightbox","SimpleLightbox","params","handlerSubmit","event","iziToast","picture","handlerLoadMore","error"],"mappings":"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"}